<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>接龍記牌小工具</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      text-align: center; 
      background: #cce; 
      font-size: 28px;
    }
    .buttons { margin: 20px; }
    button { 
      font-size: 32px;  
      margin: 8px; 
      padding: 16px 28px; 
      border-radius: 12px; 
      cursor: pointer;
    }
    .slot { 
      width: 140px;  
      height: 100px; 
      font-size: 50px;  
      border: 3px solid #333; 
      border-radius: 12px;
      background: white;
      color: black; 
      margin: 4px;
    }
    .grid { 
      display: grid; 
      grid-template-columns: repeat(6, 140px); 
      gap: 4px; 
      justify-content: center; 
      max-width: 900px; 
      margin: auto; 
    }
    .slot:nth-child(3n) {
      margin-right: 20px; 
    }
    .clear { 
      background: red; 
      color: white; 
      margin-top: 20px; 
      font-size: 34px;  
      padding: 16px 30px;
    }
  </style>
</head>
<body>

  <h2>接龍記牌小工具</h2>

  <!-- 花色選擇 -->
  <div class="buttons">
    <button onclick="selectSuit('♣')">♣</button>
    <button onclick="selectSuit('♦')">♦</button>
    <button onclick="selectSuit('♥')">♥</button>
    <button onclick="selectSuit('♠')">♠</button>
  </div>

  <!-- 數字選擇 -->
  <div class="buttons">
    <button onclick="selectRank('A')">A</button>
    <button onclick="selectRank('2')">2</button>
    <button onclick="selectRank('3')">3</button>
    <button onclick="selectRank('4')">4</button>
    <button onclick="selectRank('5')">5</button>
    <button onclick="selectRank('6')">6</button>
    <button onclick="selectRank('7')">7</button>
    <button onclick="selectRank('8')">8</button>
    <button onclick="selectRank('9')">9</button>
    <button onclick="selectRank('10')">10</button>
    <button onclick="selectRank('J')">J</button>
    <button onclick="selectRank('Q')">Q</button>
    <button onclick="selectRank('K')">K</button>
  </div>

  <!-- 空格 -->
  <div class="grid" id="slots"></div>

  <!-- 清除按鈕 -->
  <button class="clear" onclick="clearAll()">全部清除</button>
  <button class="clear" onclick="removeEmptySlots()">清除空格</button>

  <script>
    let selectedSuit = '';
    let selectedRank = '';

    function selectSuit(suit) {
      selectedSuit = suit;
    }

    function selectRank(rank) {
      selectedRank = rank;
    }

    function fillSlot(btn) {
      if (!selectedSuit && !selectedRank) {
        // 沒選牌，點牌格清空
        btn.innerText = '';
        btn.style.color = 'black';
      } else if (selectedSuit && selectedRank) {
        // 有選牌，點牌格填入或覆蓋
        btn.innerText = selectedSuit + selectedRank;
        btn.style.color = (selectedSuit === '♥' || selectedSuit === '♦') ? 'red' : 'black';
        selectedSuit = '';
        selectedRank = '';
      }
    }

    function clearAll() {
      const slots = document.querySelectorAll('.slot');
      slots.forEach(s => {
        s.innerText = '';
        s.style.color = 'black';
      });
    }

    function removeEmptySlots() {
      const slots = Array.from(document.querySelectorAll('.slot'));
      const nonEmpty = slots.filter(s => s.innerText !== '');
      const slotsContainer = document.getElementById('slots');
      slotsContainer.innerHTML = ''; // 先清空
      // 先放非空牌
      nonEmpty.forEach(s => {
        slotsContainer.appendChild(s);
      });
      // 補回空白牌格到36格
      const totalSlots = 36;
      for (let i = nonEmpty.length; i < totalSlots; i++) {
        let b = document.createElement('button');
        b.className = 'slot';
        b.onclick = () => fillSlot(b);
        slotsContainer.appendChild(b);
      }
    }

    // 建立 36 個空格
    const slotsContainer = document.getElementById('slots');
    for (let i = 0; i < 36; i++) {
      let b = document.createElement('button');
      b.className = 'slot';
      b.onclick = () => fillSlot(b);
      slotsContainer.appendChild(b);
    }
  </script>

</body>
</html>
